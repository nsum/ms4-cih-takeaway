{% extends "base.html" %}
{% load static %}

{% block page_header %}
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <div class="row">
            <div class="col text-center mt-3">
                <h2>Items</h2>
                <hr class="mb-1 w-50 hr-heading">
            </div>
        </div>
        <div class="row">
            <div class="items-container col-12 col-sm-10 offset-sm-1">
                {% for item in items %}
                    <div class="card mt-2 col-12 col-sm-10 offset-sm-1">
                        <div class="card-body">
                            <h5 class="text-center card-title">{{ item.name }}</h5>
                            <hr>
                            <p class="card-text">{{ item.description }}</p>
                            <div class="row text-muted">
                                <div class="col-4">Allergens: {{ item.allergens }}</div>
                                <div class="col-4">Price: â‚¬{{ item.price }}</div>
                                <div class="col-4">
                                    {% if item.rating %}
                                        <small class="text-muted"><i class="fas fa-star mr-1"></i>{{ item.rating }} / 5</small>
                                    {% else %}
                                        <small class="text-muted">No Rating</small>
                                    {% endif %}
                                </div>
                            </div>
                            <button type="button" class="openModal{{item.id}} btn order-btn btn-primary">Add to basket</button>
                        </div>
                        <!-- Modal -->
                        <div class="modal fade" id="myModal{{item.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                            aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h6 class="modal-title">{{item.name}}</h6>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <iframe class="iframe w-100" frameborder="0" src="{{ item.id }}">"></iframe>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

{% endblock %}
{% block postloadjs %}
    {% for item in items %}
        <script>
            $('.openModal{{item.id}}').on('click', function (e) {
                e.preventDefault();
                $('#myModal{{item.id}}').modal('show');
            });
        </script>
    {% endfor %}
{% endblock %}